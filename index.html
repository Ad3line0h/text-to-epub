<!doctype html>
<html lang="ko">
  <head>
    <meta charset="UTF-8" />
    <title>초간단 EPUB 변환</title>
    <link rel="stylesheet" href="style.css" />
  </head>
  <body>
    <header>
      <div class="site-logo">TXT to EPUB</div>

      <div class="meta-inputs">
        <input type="text" id="book-title" placeholder="제목" />
        <input type="text" id="book-author" placeholder="저자명" />
      </div>
      <div class="header-right">
        <div class="row-group">
          <div class="toc-settings">
            <span><b>목차 생성</b></span>
            <label><input type="checkbox" id="split-h1" /> h1</label>
            <label><input type="checkbox" id="split-h2" /> h2</label>
          </div>
          <div class="file-group">
            <label for="cover-upload" class="custom-file-upload"
              >표지 선택</label
            >
            <input
              type="file"
              id="cover-upload"
              accept="image/*"
              style="display: none"
            />

            <div class="file-name-wrapper">
              <span id="file-name-display">선택된 파일 없음</span>
              <div id="thumbnail-tooltip" class="thumb-tooltip"></div>
            </div>
          </div>
        </div>
        <div class="row-group">
          <div class="help-container">
            <span class="help-icon">?</span>
            <div class="help-tooltip">
              <strong>단축키</strong>
              <hr />
              <div class="help-item"><b>Ctrl + 1</b> h1 변경</div>
              <div class="help-item"><b>Ctrl + 2</b> h2 변경</div>
              <div class="help-item"><b>Ctrl + P</b> 본문 변경</div>
              <hr />
              <small>목차 미설정 시 제목으로 자동 생성</small>
            </div>
          </div>
          <button id="download-epub">EPUB 다운로드</button>
        </div>
      </div>
    </header>

    <div class="container">
      <div class="main-layout">
        <div class="pane">
          <div class="pane-title">
            <div class="tab-buttons">
              <button class="tab-btn active" data-tab="editor">EDITOR</button>
              <button class="tab-btn" data-tab="css">CSS</button>
            </div>
          </div>
          <div class="tab-content active" id="editor-tab">
            <div class="editor-toolbar">
              <button onclick="format('bold')" title="굵게"><b>B</b></button>
              <button onclick="format('italic')" title="기울임"><i>I</i></button>
              <button onclick="format('underline')" title="밑줄"><u>U</u></button>
              <div class="separator"></div>
              <button onclick="format('formatBlock', 'h1')">h1</button>
              <button onclick="format('formatBlock', 'h2')">h2</button>
              <div class="separator"></div>
              <select id="font-size-select" onchange="setFontSize(this.value)" title="글자 크기"></select>
            </div>
            <div
              id="editor-container"
              style="
                position: relative;
                flex: 1;
                display: flex;
                flex-direction: column;
              "
            >
              <div id="editor-placeholder" class="editor-placeholder">
                직접 입력하기
                <br /><small>또는</small>
                <span
                  class="upload-link"
                  onclick="document.getElementById('import-file').click()"
                  >파일 불러오기</span
                >
                <br /><small>지원하는 형식: txt, docx</small>
              </div>
              <div id="editor" contenteditable="true"></div>
            </div>
          </div>
          <div class="tab-content" id="css-tab">
            <div class="css-toolbar">
              <button class="css-tool-btn" onclick="insertSpeechBubble()" title="말풍선 삽입">말풍선</button>
            </div>
            <textarea id="css-editor">
p { text-indent: 1em; }
h1, h2 { text-align: center; margin-top: 1em; }
        </textarea
            >
          </div>
        </div>

        <div class="pane">
          <div class="pane-title">
            <div class="tab-buttons">
              <button class="tab-btn active" data-tab="preview">PREVIEW</button>
              <button class="tab-btn" data-tab="xhtml">XHTML</button>
            </div>
          </div>
          <div id="code-view" class="tab-content"></div>
          <div id="epub-preview" class="tab-content epub-preview-container active"></div>
        </div>
      </div>
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.10.1/jszip.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/mammoth/1.6.0/mammoth.browser.min.js"></script>
    <script src="script.js?v=1.1"></script>

    <input
      type="file"
      id="import-file"
      accept=".txt, .docx, application/vnd.openxmlformats-officedocument.wordprocessingml.document"
      style="display: none"
      onchange="handleFile(this)"
    />
  </body>
</html>